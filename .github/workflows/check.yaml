# Copyright Contributors to the Open Cluster Management project

name: Check

on:
  push:
    branches: [ main, release-* ]
  pull_request:
    branches: [ main, release-* ]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Extract branch name
      shell: bash
      run: echo "##[set-output name=branch;]$(echo ${GITHUB_REF#refs/heads/})"
      id: extract_branch

    - name: DCO
      run: make dco BRANCH_NAME=${{ steps.current_branch.outputs.branch }}

    - name: Check
      run: make check 